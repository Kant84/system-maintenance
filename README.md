# system-maintenance

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è Linux-—Å–µ—Ä–≤–µ—Ä–∞.  
–í—ã–ø–æ–ª–Ω—è–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∑–∞—â–∏—Ç—É, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫.  
–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–æ ‚Äî –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã (`sensors`)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≥—Ä—É–∑–∫–∏ CPU (load average)
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–π RAM
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ—à–∏–±–æ–∫ `journalctl`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤–∑–ª–æ–º–∞ SSH (Failed password)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–¥–º–∏–Ω—É
- –ê–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ IP –≤ –±–∞–Ω (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ fail2ban)

### ‚ö° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ runaway-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (CPU > 80%)
- –ú—è–≥–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ + –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–±–∏–π—Å—Ç–≤–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ö–æ–Ω—Ç—Ä–æ–ª—å zombie-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ê–≤—Ç–æ—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### üõ† –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —É–ø–∞–≤—à–∏—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –û—á–∏—Å—Ç–∫–∞ –∂—É—Ä–Ω–∞–ª–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ —Å–±–æ–π–Ω—ã—Ö —é–Ω–∏—Ç–æ–≤ systemd
- –°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### ‚¨Ü –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `apt update`
- `apt upgrade`
- `apt full-upgrade`
- `apt autoremove`
- `apt autoclean`

### üìù –õ–æ–≥–∏ –∏ –æ—Ç—á—ë—Ç—ã
- –í–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ª–æ–≥–∞ `/var/log/system_maintenance.log`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 2 –¥–Ω—è
- –§–æ—Ä–º–∞—Ç —É–¥–æ–±–Ω—ã–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### ‚è± –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ä–µ–∂–∏–º
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd timer (–≤ 00:00)

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (.deb –ø–∞–∫–µ—Ç)

–ü–∞–∫–µ—Ç –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
wget https://github.com/Kant84/system-maintenance/releases/latest/download/system-maintenance.deb
sudo dpkg -i system-maintenance.deb


---

–ü–∞–∫–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (mailutils)
* –°–∫–æ–ø–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç –≤ `/usr/local/bin/`
* –°–æ–∑–¥–∞—Å—Ç systemd service –∏ timer
* –í–∫–ª—é—á–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫
* –ó–∞–ø—É—Å—Ç–∏—Ç —Å–∏—Å—Ç–µ–º—É –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞

```
system-maintenance/
‚îú‚îÄ‚îÄ DEBIAN/
‚îÇ   ‚îú‚îÄ‚îÄ control
‚îÇ   ‚îî‚îÄ‚îÄ postinst
‚îú‚îÄ‚îÄ usr/
‚îÇ   ‚îî‚îÄ‚îÄ local/
‚îÇ       ‚îî‚îÄ‚îÄ bin/
‚îÇ           ‚îî‚îÄ‚îÄ system_maintenance.sh
‚îî‚îÄ‚îÄ etc/
    ‚îî‚îÄ‚îÄ systemd/
        ‚îî‚îÄ‚îÄ system/
            ‚îú‚îÄ‚îÄ system-maintenance.service
            ‚îî‚îÄ‚îÄ system-maintenance.timer
```

---

## ‚ñ∂ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

```bash
sudo systemctl start system-maintenance.service
```

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥:

```bash
sudo cat /var/log/system_maintenance.log
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–π–º–µ—Ä:

```bash
systemctl status system-maintenance.timer
```

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ GitHub Releases –∏–ª–∏ webhook-—Å–∫—Ä–∏–ø—Ç (`webhook_update.sh`).

---

## üß© –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Debian / Ubuntu / Linux Mint / Proxmox –∏ –ª—é–±—ã–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å–∏—Å—Ç–µ–º—ã
* systemd
* –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
* –ü—Ä–∞–≤–∞ root

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

**Kant84**
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è Linux, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, DevOps-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

---

## ‚öñ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
–ü—Ä–æ–µ–∫—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π.

```


